"use strict";var _slicedToArray=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},dom99=function(){var e={},t={},n={},r={},i={},o=[],a=e,c=t,u=n,l=void 0,f="MISS",d="CONTEXT",v="DVRPL",s="DVRP",m=Object.prototype.hasOwnProperty,p=function(e){return"object"===("undefined"==typeof e?"undefined":_typeof(e))&&null!==e},y=function(e){return e.map(function(e){return e})},E=function e(t,n){Object.keys(n).forEach(function(r){p(n[r])?(m.call(t,r)||(Array.isArray(n[r])?t[r]=[]:t[r]={}),e(t[r],n[r])):t[r]=n[r]})},b=function(e){return function(t){return m.call(e,t)?e[t]:e[f]}},h=b({INPUT:"value",TEXTAREA:"value",PROGRESS:"value",SELECT:"value",IMG:"src",SOURCE:"src",AUDIO:"src",VIDEO:"src",TRACK:"src",SCRIPT:"src",OPTION:"value",LINK:"href",DETAILS:"open",MISS:"textContent"}),g=b({checkbox:"checked",radio:"checked",MISS:"value"}),S=b({checkbox:"change",radio:"change",range:"change",file:"change",MISS:"input"}),T=b({SELECT:"change",INPUT:"input",BUTTON:"click",MISS:"click"}),A={attributeValueDoneSign:"â˜€",tokenSeparator:"-",listSeparator:",",directives:{directiveFunction:"data-fx",directiveVariable:"data-vr",directiveElement:"data-el",directiveList:"data-list",directiveIn:"data-in",directiveTemplate:"data-template"},variablePropertyFromElement:function(e){var t=e.tagName||e;return"INPUT"===t?g(e.type||"text"):h(t)},eventNameFromElement:function(e){var t=e.tagName;return"INPUT"===t?S(e.type):T(t)},tagNamesForUserInput:["INPUT","TEXTAREA","SELECT","DETAILS"]},I=function(e){var t=document.createElement(e.tagName);return Object.keys(e).forEach(function(n){"tagName"!==n&&t.setAttribute(n,e[n])}),t},N=function e(t,n){if(n(t),"TEMPLATE"!==t.tagName)for(t=t.firstElementChild;t;)e(t,n),t=t.nextElementSibling},O=function(e){return e.getAttribute("is")||e.tagName.toLowerCase()},P=function(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3];e.addEventListener(t,n,r)},C=function(e,t){t.split(A.listSeparator).forEach(function(t){var n=t.split(A.tokenSeparator);if(1===n.length){var r=n[0],i=A.eventNameFromElement(e);L(e,i,r)}else{var o=_slicedToArray(n,2),a=o[0],c=o[1];L(e,a,c)}})},L=function(e,t,n){!r[n],P(e,t,r[n])},k=function(e,t){var n=t.split(A.tokenSeparator),r=_slicedToArray(n,3),o=r[0],c=r[1],u=r[2],l=void 0,f=void 0,d="-";u&&(d=c+"-"+u),m.call(a,o)&&(f=a[o]),e[v]=A.variablePropertyFromElement(c.toUpperCase()),Object.defineProperty(a,o,{get:function(){return l},set:function(t){var n=document.createDocumentFragment();l=t,e.innerHTML="",m.call(i,d)?!function(){var e=i[d];j(o),l.forEach(function(t,r){j(String(r));var i=H(U(e));R(),n.appendChild(i)}),R()}():l.forEach(function(t){var r=document.createElement(c);p(t)?Object.assign(t,r):r[e[v]]=t,n.appendChild(r)}),e.appendChild(n)},enumerable:!0,configurable:!1}),void 0!==f&&(a[o]=f)},x=function(e,t){e[s]=A.variablePropertyFromElement(e),m.call(c,t)?(c[t].push(e),e[e[s]]=a[t]):!function(){var n=void 0;m.call(a,t)&&(n=a[t]);var r=c,i="";c[t]=[e],Object.defineProperty(a,t,{get:function(){return i},set:function(e){i!==e&&(i=e,r[t].forEach(function(e){e[e[s]]=i}))},enumerable:!0,configurable:!1}),void 0!==n&&(a[t]=n)}(),A.tagNamesForUserInput.includes(e.tagName)&&!function(){var n=a,r=function(e){n[t]=e.target[e.target[s]]};P(e,A.eventNameFromElement(e),r)}()},D=function(e,t){var n=t;u[n]=e},F=function(e,t){i[t]=e},U=function(){return"content"in document.createElement("template")?function(e){return document.importNode(e.content,!0)}:function(e){var t=document.createElement("div");return t.innerHTML=e.innerHTML,t}}(),j=function(e){o.push(e),m.call(u,e)||(u[e]={}),m.call(a,e)||(a[e]={}),m.call(c,e)||(c[e]={}),u=u[e],a=a[e],c=c[e]},M=function(e,t){var n=e;return t.forEach(function(e){n=n[e]}),n},R=function(){o.pop(),u=M(n,o),a=M(e,o),c=M(t,o)},V=function(){var r=function(e,t){var n=e,r=t.pop();t.forEach(function(e){n=n[e]}),delete n[r]};return function(i){Array.isArray(i)||(i=[i]),r(n,y(i)),r(e,y(i)),r(t,y(i))}}(),w=function(e,t){var n=i[O(e)];j(t);var r=H(U(n));e.CONTEXT={el:u,vr:a,baseEl:e},R(),e.appendChild(r)},_=function(e){if(e.hasAttribute&&(l.forEach(function(t){var n=_slicedToArray(t,2),r=n[0],i=n[1];if(e.hasAttribute(r)){var o=e.getAttribute(r);o[0]!==A.attributeValueDoneSign&&(i(e,o),e.setAttribute(r,A.attributeValueDoneSign+o))}}),!e.hasAttribute(A.directives.directiveIn))){var t=O(e);m.call(i,t)&&e.appendChild(U(i[t]))}},X=function e(t){var n=t.parentNode;if(n)return m.call(n,d)?n[d]:e(n);throw new Error("element has no parent context")},H=function(){var e=arguments.length<=0||void 0===arguments[0]?document.body:arguments[0];return l||(l=[[A.directives.directiveElement,D],[A.directives.directiveVariable,x],[A.directives.directiveFunction,C],[A.directives.directiveList,k],[A.directives.directiveIn,w],[A.directives.directiveTemplate,F]]),N(e,_),e},K={el:n,fx:r,createElement2:I,forgetKey:V,linkJsAndDom:H,options:A,getParentContext:X};return Object.defineProperty(K,"vr",{get:function(){return e},set:function(t){return!t||!p(t),E(e,t),t},enumerable:!0,configurable:!1}),Object.freeze(K)}();"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=dom99);